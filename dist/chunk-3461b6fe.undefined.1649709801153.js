(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3461b6fe"],{6726:function(e,t,a){"use strict";a("71d6")},"71d6":function(e,t,a){},"9b66":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verification"},[a("div",{staticClass:"check-code"},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"0.5rem"}},[e._v("请输入兑换码")]),a("van-password-input",{attrs:{value:e.value,mask:!1,focused:e.showKeyboard,length:"4",gutter:10},on:{focus:function(t){e.showKeyboard=!0}}}),a("van-number-keyboard",{attrs:{show:e.showKeyboard},on:{blur:function(t){e.showKeyboard=!1}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("van-popup",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"detail"},[a("div",{staticClass:"title"},[e._v("资料确认")]),a("div",{staticClass:"content"},[a("div",{staticClass:"nickname flex"},[a("div",{staticClass:"left"},[e._v("客户昵称：")]),a("div",{staticClass:"right"},[e._v(e._s(e.nickname))])]),a("div",{staticClass:"tel flex"},[a("div",{staticClass:"left"},[e._v("手机号码：")]),a("div",{staticClass:"right"},[e._v(e._s(e.tel))])]),a("div",{staticClass:"num flex"},[a("div",{staticClass:"left"},[e._v("兑换颗数：")]),a("div",{staticClass:"right"},[e._v(e._s(e.num))])]),a("div",{staticClass:"code-num flex"},[a("div",{staticClass:"left"},[e._v("兑换码：")]),a("div",{staticClass:"right"},[e._v(e._s(e.code))])]),a("div",{staticClass:"apply-time flex"},[a("div",{staticClass:"left"},[e._v("申请时间：")]),a("div",{staticClass:"right"},[e._v(e._s(e.applyTime))])])]),a("div",{staticClass:"btn flex"},[a("div",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")]),a("div",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确认核销")])])])])],1)},c=[],s=a("1da1"),i=(a("96cf"),a("99af"),a("4ec3")),o=a("2b0e"),r=a("e41f"),l=a("d399"),u=a("2241"),d=a("c41f"),v=a("7bd9"),f=a("fa7d");o["a"].use(r["a"]),o["a"].use(l["a"]),o["a"].use(u["a"]),o["a"].use(d["a"]),o["a"].use(v["a"]);var m={data:function(){return{code:"",show:!1,time:"",nickname:"",tel:"",num:"",applyTime:"",value:"",showKeyboard:!0}},watch:{value:function(e){4===e.length&&this.exchange()}},created:function(){Object(f["a"])(!0)},methods:{exchange:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["K"])({writeOffCode:e.value});case 2:a=t.sent,200==a.data.code?(n=a.data.data,n?(console.log("=========",n),e.show=!0,e.nickname=n.memberName,e.num=n.number,e.tel=n.registeredTelephone,e.code=n.writeOffCode,e.applyTime="".concat(n.createTime[0],"-").concat(n.createTime[1],"-").concat(n.createTime[2]," ").concat(n.createTime[3],":").concat(n.createTime[4],":").concat(n.createTime[5])):l["a"].fail("无此兑换码或兑换码已核销")):(e.show=!0,console.log(e.show));case 4:case"end":return t.stop()}}),t)})))()},cancel:function(){console.log("取消"),this.value="",this.show=!1},confirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("确认核销"),e.show=!1,t.next=4,Object(i["f"])({writeOffCode:e.value});case 4:a=t.sent,200==a.data.code?(e.value="",l["a"].success("核销成功")):(e.show=!1,u["a"].alert({title:"核销失败",message:"钻石数量不足"}).then((function(){e.value=""})));case 6:case"end":return t.stop()}}),t)})))()},codeChange:function(){console.log("change")}}},h=m,p=(a("6726"),a("2877")),g=Object(p["a"])(h,n,c,!1,null,"b415167e",null);t["default"]=g.exports},fa7d:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return u}));var n=a("1da1"),c=(a("96cf"),a("99af"),a("a078")),s=a("4ec3"),i=a("18a0"),o=a.n(i),r=function(e){var t=JSON.parse(localStorage.getItem("token"));return!!t||(e&&Object(c["a"])({redirectPath:"/blank"}),!1)},l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["r"])();case 2:if(a=e.sent,a&&a.data&&a.data.data.memberTelephone){e.next=7;break}return t.$toast("请先绑定手机号"),o.a.miniProgram.reLaunch({url:"/pages/bindPhone/bindPhone?nextPath=".concat(encodeURIComponent("https://m.yiqiwen.cn/dist/tlzb?phone="),"&token=").concat(JSON.parse(localStorage.getItem("token")))}),e.abrupt("return");case 7:o.a.miniProgram.reLaunch({url:"/pages/thirdParty/thirdParty?webUrl=".concat(encodeURIComponent("https://m.yiqiwen.cn/dist/tlzb?phone=".concat(a.data.data.memberTelephone)),"&token=").concat(JSON.parse(localStorage.getItem("token")))});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){o.a.miniProgram.navigateTo({url:"/pages/payment/payment?token=".concat(JSON.parse(localStorage.getItem("token")),"&").concat(e)})}}}]);