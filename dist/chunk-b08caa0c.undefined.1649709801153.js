(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b08caa0c"],{"13b6":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"address",class:"my"==t.page?"page_me":""},[i("van-nav-bar",{staticClass:"title",attrs:{"left-text":"返回","left-arrow":"",title:"my"==t.page?"地址管理":t.title,fixed:""},on:{"click-left":t.onClickLeft}}),i("Loading",{attrs:{loading:t.loadingPage}}),i("div",{staticClass:"address-detail"},[i("div",{staticClass:"address-title"},[t._v(" 配送地址 ")]),t._l(t.list,(function(e,r){return i("div",{key:r,staticClass:"address_list"},[i("div",{on:{click:function(i){return t.onselect(e)}}},[i("div",{staticClass:"detail"},[t._v(t._s(e.address))]),i("div",{staticClass:"address-name"},[e.isDefault?i("div",{staticClass:"def"},[t._v("默认地址")]):t._e(),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"tel"},[t._v(t._s(e.tel))])])]),i("div",{on:{click:function(i){return t.onEdit(e,r)}}},[i("van-icon",{attrs:{name:"edit",size:"20"}})],1)])})),0!==t.disabledList.length?i("div",[i("div",{staticClass:"address-title"},[t._v(" 以下地址超出配送范围 ")]),t._l(t.disabledList,(function(e,r){return i("div",{key:r,staticClass:"address_list disable"},[i("div",[i("div",{staticClass:"detail"},[t._v(t._s(e.address))]),i("div",{staticClass:"address-name"},[i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"tel"},[t._v(t._s(e.tel))])])]),i("div",{on:{click:function(i){return i.stopPropagation(),t.onEdit(e,r)}}},[i("van-icon",{attrs:{name:"edit",size:"20"}})],1)])}))],2):t._e()],2),i("div",{staticClass:"add",on:{click:t.onAdd}},[t._v("新增地址")])],1)},n=[],a=i("1da1"),s=(i("96cf"),i("159b"),i("a9e3"),i("2f94")),o=i("2b0e"),d=i("543e"),c=i("67bb"),u=i("ad06"),l=i("2241");o["a"].use(d["a"]),o["a"].use(c["a"]),o["a"].use(u["a"]);var f={data:function(){return{chosenAddressId:-1,list:[],disabledList:[],page:"",title:"地址选择",loading:!0,loadingPage:!0}},methods:{loadingTime:function(t){var e=this;this.loadingPage=!0,setTimeout((function(){e.loadingPage=!1,e.$router.push(t)}),2e3)},addressList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.list=[],t.disabledList=[],i=JSON.parse(localStorage.getItem("storeNo")),e.next=5,Object(s["f"])({storeNo:i});case 5:r=e.sent,r.data.data.forEach((function(e,i){var r={};r.id=e.id,r.name=e.consignee,r.tel=e.telephone,r.address=e.detailAddress+"-"+e.placeName+e.houseNumber,r.isDefault=e.isDefault,r.isInDeliverArea=e.isInDeliverArea,r.isInDeliverArea?t.list.push(r):t.disabledList.push(r)})),1===t.list.length&&(t.chosenAddressId=t.list[0].id),t.loading=!1,setTimeout((function(){t.loadingPage=!1}),1e3);case 10:case"end":return e.stop()}}),e)})))()},onClickLeft:function(){"my"===this.page?this.$router.push({path:"/me"}):(0===this.list.length&&(this.chosenAddressId=-1),this.$router.push({path:"/account",query:{storeNo:this.storeNo,consignAddrId:this.chosenAddressId}}))},onAdd:function(){this.$router.push({path:"/editaddress",query:{id:-1}}),localStorage.setItem("addressUrl",JSON.stringify(window.location.href))},onEdit:function(t,e){this.$router.push({path:"/editaddress",query:{id:t.id}}),localStorage.setItem("addressUrl",JSON.stringify(window.location.href))},onDisabledEdit:function(t,e){this.$router.push({path:"/editaddress",query:{id:t.id}}),localStorage.setItem("addressUrl",JSON.stringify(window.location.href))},onselect:function(t){if("my"===this.page)return!1;this.$router.push({path:"/account",query:{consignAddrId:t.id,storeNo:this.storeNo}})},onDisabledselect:function(){if("my"===this.page)return!1;l["a"].alert({message:"该收货地址不在配送范围，请选择在配送范围的收货地址"}).then((function(){}))},forbidBack:function(){window.history.pushState("forward",null,"#"),window.history.forward(1)}},mounted:function(){window.history&&window.history.pushState&&(window.addEventListener("popstate",this.forbidBack,!1),this.forbidBack())},destoryed:function(){window.removeEventListener("popstate",this.forbidBack,!1)},created:function(){this.addressList();var t=this.$route.query.storeNo;this.storeNo=t||JSON.parse(localStorage.getItem("storeNo"));var e=this.$route.query.chosenAddressId;e&&(this.chosenAddressId=Number(e)),this.page=this.$route.query.page}},h=f,p=(i("2e36"),i("2877")),v=Object(p["a"])(h,r,n,!1,null,"3f2bf0d2",null);e["default"]=v.exports},"159b":function(t,e,i){var r=i("da84"),n=i("fdbc"),a=i("785a"),s=i("17c2"),o=i("9112"),d=function(t){if(t&&t.forEach!==s)try{o(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in n)n[c]&&d(r[c]&&r[c].prototype);d(a)},"17c2":function(t,e,i){"use strict";var r=i("b727").forEach,n=i("a640"),a=n("forEach");t.exports=a?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"2e36":function(t,e,i){"use strict";i("ae5b")},"2f94":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"d",(function(){return o})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return c})),i.d(e,"h",(function(){return u})),i.d(e,"c",(function(){return l})),i.d(e,"e",(function(){return f}));var r=i("b775"),n=r["b"];function a(t){return n({url:"/api/wx/consignAddr/addOrUpdate",method:"POST",data:t})}function s(t){return n({url:"/api/wx/consignAddr/delete",method:"POST",data:t})}function o(t){return n({url:"/api/wx/consignAddr/info",method:"GET",params:t})}function d(t){return n({url:"/api/wx/consignAddr/list",method:"GET",params:t})}function c(t){return n({url:"/api/wx/map/parseByLocation",method:"GET",params:t})}function u(t){return n({url:"/api/wx/map/searchLocation",method:"GET",params:t})}function l(t){return n({url:"/api/wx/map/districtList",method:"GET",params:t})}function f(t){return n({url:"/api/wx/map/isInDeliverArea",method:"GET",params:t})}},"408a":function(t,e){var i=1..valueOf;t.exports=function(t){return i.call(t)}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var r=i("1d80"),n=i("577e"),a=i("5899"),s="["+a+"]",o=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),c=function(t){return function(e){var i=n(r(e));return 1&t&&(i=i.replace(o,"")),2&t&&(i=i.replace(d,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},a640:function(t,e,i){"use strict";var r=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,i){"use strict";var r=i("83ab"),n=i("da84"),a=i("94ca"),s=i("6eeb"),o=i("1a2d"),d=i("7156"),c=i("d9b5"),u=i("c04e"),l=i("d039"),f=i("241c").f,h=i("06cf").f,p=i("9bf2").f,v=i("408a"),g=i("58a8").trim,m="Number",b=n[m],w=b.prototype,N=function(t){var e=u(t,"number");return"bigint"===typeof e?e:E(e)},E=function(t){var e,i,r,n,a,s,o,d,l=u(t,"number");if(c(l))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(a=l.slice(2),s=a.length,o=0;o<s;o++)if(d=a.charCodeAt(o),d<48||d>n)return NaN;return parseInt(a,r)}return+l};if(a(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var I,_=function(t){var e=arguments.length<1?0:b(N(t)),i=this;return i instanceof _&&l((function(){v(i)}))?d(Object(e),i,_):e},y=r?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;y.length>A;A++)o(b,I=y[A])&&!o(_,I)&&p(_,I,h(b,I));_.prototype=w,w.constructor=_,s(n,m,_)}},ae5b:function(t,e,i){}}]);