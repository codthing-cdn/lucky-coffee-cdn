(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cde1cac"],{"0481":function(t,e,o){"use strict";var a=o("23e7"),s=o("a2bf"),n=o("7b0b"),i=o("07fa"),c=o("5926"),r=o("65f0");a({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=n(this),o=i(e),a=r(e,0);return a.length=s(a,e,e,o,0,void 0===t?1:c(t)),a}})},"11c8":function(t,e,o){"use strict";o("7cc7")},"11f2":function(t,e,o){"use strict";o("2356")},"1b44":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"share_bg"},[a("img",{attrs:{src:o("bea2"),alt:""}})])}],n={},i=n,c=(o("9a20"),o("2877")),r=Object(c["a"])(i,a,s,!1,null,"9456d058",null);e["a"]=r.exports},2356:function(t,e,o){},3002:function(t,e){t.exports="data:image/png;base64,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"},"3e9f":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"foods"},[a("Loading",{attrs:{loading:t.loadingPage}}),a("van-nav-bar",{staticClass:"title",attrs:{title:"菜单详情",fixed:""}}),a("div",{staticClass:"box"},[a("div",{staticClass:"icon animated fadeInRight",on:{click:t.handleGetCoupon}},[a("van-icon",{attrs:{name:"point-gift",color:"#fff"}}),t._v("领优惠券 ")],1)]),a("div",{staticClass:"sort animated fadeIn"},[a("div",{staticClass:"shopdesk"},[a("div",{staticClass:"name"},[a("div",{staticClass:"shop_left",on:{click:function(e){return t.toShopList()}}},[a("div",{staticClass:"shopLogo"},[a("img",{attrs:{src:t.shop.storeLogo?""+t.$imgUrl+t.shop.storeLogo:t.logo}})]),a("span",{staticClass:"shopdesk_name"},[t._v(t._s(t.shop.storeName))]),a("van-icon",{attrs:{name:"arrow",color:"#112e59"}})],1)]),a("div",{staticClass:"shopdesk_content"},[t.shop.distance?a("div",{staticClass:"shopdesk_distance"},[t._v(" 约"+t._s(t.shop.distance)+"km ")]):a("div",{staticClass:"shopdesk_distance"},[t._v("定位失败")]),a("div",{staticClass:"shopdesk_adress"},[a("van-icon",{attrs:{name:"location-o"}}),t._v(" "+t._s(t.shop.storeAddress)+" ")],1)]),a("div",{staticClass:"shop_right",on:{click:function(e){return t.handleType()}}},[a("div",{staticClass:"ziti",class:"0"==t.type?"active animated fadeInRight":""},[t._v(" 自提 ")]),a("div",{staticClass:"send",class:"1"==t.type?"active animated fadeInLeft":""},[t._v(" 配送 ")])])]),a("van-tabs",{on:{click:t.handleClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",[t.foods.length>0?a("Food",{attrs:{foodData:t.foods,total:t.total,storeAdvertise:t.storeAdvertise,storeAdvertiseTwo:t.storeAdvertiseTwo},on:{toSumbitOrderNow:t.handleAccount,handleAdd:t.handleAdd,handleReduce:t.handleReduce,showShareBtn:t.handleShowShareBtn}}):t._e(),t.showShop?t._e():a("div",{staticClass:"footer",class:t.allPrice>0?"foode_active":""},[a("div",{staticClass:"left"},[a("div",{class:t.allPrice>0?"cart_active":"cart",on:{click:t.handleCart}},[a("van-icon",{attrs:{name:"shopping-cart",color:"#000"}}),t.total>0?a("span",{staticClass:"total"},[t._v(t._s(t.total))]):t._e()],1),t.allPrice>0?a("span",{staticClass:"allPrice"},[t._v("￥"+t._s(t.allPrice))]):t._e()]),a("div",{staticClass:"right",on:{click:t.handleAccount}},[a("span",[t._v("提交订单")])])])],1)],1)],1),a("van-action-sheet",{staticClass:"show",attrs:{title:"购物车"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"clearCart",on:{click:t.clearCartBtn}},[t._v("清空购物车")]),a("div",{staticClass:"content"},t._l(t.localFoods,(function(e,o){return a("div",{key:o,staticClass:"cart_item"},[a("div",{staticClass:"cart_title"},[t._v(t._s(e.foodName))]),a("div",{staticClass:"cart_right"},[a("div",{staticClass:"cart_price"},[t._v("￥"+t._s(e.totalprice))]),a("div",{staticClass:"cart_num"},[a("div",{staticClass:"stepper"},[a("div",{staticClass:"reduce",on:{click:function(e){return t.handleReduce1(o)}}},[t._v("-")]),a("div",{staticClass:"num"},[t._v(t._s(e.num))]),a("div",{staticClass:"add",on:{click:function(e){return t.handleAdd1(o)}}},[t._v("+")])])]),t.specification[o]?a("div",{staticClass:"bottom"},[t._v(" 规格："+t._s(t.specification[o])+" ")]):t._e()])])})),0)]),t.isShowSharp?a("div",{staticClass:"sharpImg",on:{click:function(e){t.isShowSharp=!1}}},[a("ShareBg")],1):t._e(),0!=t.couponData.length&&1==t.isShowCounpon?a("div",{directives:[{name:"show",rawName:"v-show",value:t.showReceive,expression:"showReceive"}]},[a("van-overlay",{attrs:{show:t.showCounpon},on:{click:function(e){t.showCounpon=!1}}},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"block"},[0==t.couponData.length?a("div",{staticClass:"no_coupon"},[a("img",{attrs:{src:o("8c8a"),alt:""}})]):t._e(),a("div",{staticClass:"getCunponimgs"},[a("img",{attrs:{src:o("3002"),alt:""}})]),a("div",{staticClass:"getCunponimgs",staticStyle:{"margin-top":"0.1rem",height:"0.5rem !important"}},[t._v(" 领劵下单更优惠 ")]),a("div",{staticClass:"coupon_content"},[t._l(t.couponData,(function(e,o){return a("div",{key:o,staticClass:"content"},[a("div",{staticClass:"left"},[2==e.discountType?a("span",[t._v(t._s(e.discountProportionShow)),a("span",{staticClass:"company"},[t._v("折")])]):3==e.discountType?a("span",[a("span",{staticClass:"company"},[t._v("统一￥"),a("br")]),t._v(t._s(e.discountPrice))]):a("span",[a("span",{staticClass:"company"},[t._v("￥")]),t._v(t._s(e.discountPrice))])]),a("div",{staticClass:"center"},[a("div",{staticClass:"name"},[t._v(t._s(e.storeName))]),a("div",{staticClass:"couponName"},[a("span",[t._v("·")]),a("div",[t._v(t._s(e.couponName))])]),1==e.discountType?a("div",{staticClass:"discountprice"},[a("span",[t._v("·")]),a("div",[t._v("满"+t._s(e.thresholdPrice)+"元可用")])]):t._e()])])})),0!=t.couponData.length?a("div",{staticClass:"all_choosed",on:{click:t.handleAllChoose}},[t._v(" 一键领取 ")]):t._e(),0!=t.couponData.length?a("div",{staticClass:"all_chooseds"},[t._v(" 领取后在“我的优惠券”查看使用 ")]):t._e()],2)])])])],1):t._e()],1)},s=[],n=o("2909"),i=o("5530"),c=o("1da1"),r=(o("96cf"),o("4de4"),o("159b"),o("99af"),o("d3b7"),o("25f0"),o("ac1f"),o("466d"),o("b680"),o("a434"),o("d81d"),o("0481"),o("7db0"),o("3ca3"),o("ddb0"),o("9861"),o("841c"),o("2b0e")),l=o("951d"),u=o.n(l),d=o("7d5e"),h=o("543e"),f=o("0b33"),p=o("5e46"),g=o("20fb"),m=o("28a2"),v=o("ab2c"),w=o("2241"),C=o("d399"),S=o("4ec3"),A=o("fa7d"),I=o("2f94"),N=o("18a0"),U=o.n(N),b=(o("8e43"),o("9d6b")),k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"advertisement"},[o("div",{staticClass:"content"},[t.img?o("img",{staticClass:"bounceIn",attrs:{src:t.img,alt:"",srcset:""},on:{click:t.handleGetCoupon}}):t._e(),o("div",{staticClass:"close"},[o("van-icon",{attrs:{name:"close"},on:{click:t.handleClose}})],1)])])},y=[],T={props:{img:String,isShowCart:Boolean},data:function(){return{}},components:{},mounted:function(){},methods:{handleClose:function(){this.$emit("ShowCartHidden",!1)},handleGetCoupon:function(){this.$emit("ShowCartHidden",!1),this.$router.push("/getcoupon")}}},L=T,O=(o("11c8"),o("2877")),j=Object(O["a"])(L,k,y,!1,null,"005d2550",null),R=(j.exports,o("1b44"));r["a"].use(d["a"]),r["a"].use(h["a"]),r["a"].use(f["a"]),r["a"].use(p["a"]),r["a"].use(g["a"]),r["a"].use(m["a"]),r["a"].use(v["a"]),r["a"].use(w["a"]),r["a"].use(C["a"]);var F={components:{Food:b["a"],ShareBg:R["a"]},computed:{deliveryNum:function(){return this.fixFloatCalcRudely(this.shop.sendAmountLower-this.allPrice)},allPrice:function(){return(this.localFoods||[]).reduce((function(t,e){return t+e.totalprice}),0)}},watch:{localFoods:function(t,e){console.log(t,e)}},data:function(){return{isShowCounpon:!1,couponData:[],Loading:!0,couponIdList:[],clicked:!1,couponType:{1:"满减",2:"折扣",3:"统一价"},showCounpon:!0,storeNo:0,active:0,value:0,foods:[],shop:{},localFoods:[],show:!1,showShop:!1,total:0,loading:!0,logo:u.a,shopImg:[],locationInfo:{},loadingPage:!0,type:"0",cartShow:!1,specification:[],isFromPoster:!1,isShowCart:!1,adImg:"",storeAdvertise:void 0,storeAdvertiseTwo:void 0,isShowSharp:!1,wxSharpConfig:{},ShowShareBtn:!0,couponName:"",showReceive:!1}},methods:{handleChoose:function(t){if(console.log("lingqu"),this.clicked)return!1;this.clicked=!0,this.couponIdList=[],this.couponIdList.push(t),this.couponData=this.couponData.filter((function(e){return e.id!=t})),this.getCoupon()},handleAllChoose:function(){var t=this;if(this.clicked)return!1;this.clicked=!0,this.couponIdList=[],this.couponData.forEach((function(e,o){t.couponIdList.push(e.id)})),C["a"].loading({message:"一键领取中...",forbidClick:!0,loadingType:"spinner",duration:3e3}),setTimeout((function(){t.couponData=[],t.getCoupon()}),3e3)},storeCouponList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["U"])({storeNo:t.storeNo});case 2:o=e.sent,200===o.status&&(t.Loading=!1,t.loadingPage=!1),t.couponData=o.data.data?o.data.data:[];case 5:case"end":return e.stop()}}),e)})))()},getCoupon:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["g"])(t.couponIdList);case 2:o=e.sent,Object(C["a"])({position:"center",message:o.data.msg,duration:2e3}),setTimeout((function(){t.clicked=!1}),1500);case 5:case"end":return e.stop()}}),e)})))()},onClickLeft:function(){this.$router.push("foods1/"+this.storeNo)},showCounpons:function(){console.log(this.showCounpon),this.showCounpon,this.showCounpon,console.log(this.showCounpon)},clearCartBtn:function(t){localStorage.removeItem("cart".concat(localStorage.getItem("storeNo")||114)),this.localFoods=[],this.total=0,this.show=!1},handleShowShareBtn:function(t){this.ShowShareBtn=t},sharpHandler:function(){this.isShowSharp=!0},settlementOrder:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.couponName?e.loadingTime({path:"/account?storeNo=".concat(e.storeNo,"&couponName=").concat(e.couponName)}):e.loadingTime({path:"/account?storeNo=".concat(e.storeNo)});case 1:case"end":return t.stop()}}),t)})))()},ShowCartHidden:function(t){this.showReceive=t,localStorage.setItem("getcoupon",!0)},fixFloatCalcRudely:function(t){if("number"===typeof t){var e=t.toString(),o=e.match(/\.(\d*?)(9|0)\2{5,}(\d{1,5})$/);if(null!=o)return t.toFixed(o[1].length)-0}return t},couponList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(A["a"])()){e.next=5;break}return e.next=3,Object(S["U"])({storeNo:t.storeNo});case 3:o=e.sent,o.data.data&&o.data.data.length>0&&(localStorage.getItem("getcoupon")||(t.isShowCart=!0));case 5:case"end":return e.stop()}}),e)})))()},isReceive:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["t"])();case 2:o=e.sent,t.showReceive=o.data.data.isReceive,t.adImg=o.data.data.url,console.log(t.showReceive,"判断用户今日是否已经领取优惠券");case 6:case"end":return e.stop()}}),e)})))()},handleGetCoupon:function(){Object(A["a"])(!0)&&this.loadingTime("/getcoupon")},loadingPageFunction:function(t){this.loadingPage=t},loadingTime:function(t){this.$router.push(t)},handleType:function(){"0"==this.type?(this.type="1",localStorage.setItem("type","2")):(this.type="0",localStorage.setItem("type","1"))},toShopList:function(){this.loadingTime("/choseShop")},isInDeliverArea:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(I["e"])({latAndLng:t.locationInfo.latAndLng,storeNo:t.storeNo});case 3:o=e.sent,o.data.data.isInDeliverArea,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},parseByLocation:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(I["g"])({latAndLng:t});case 3:a=o.sent,e.locationInfo=a.data.data||{},localStorage.setItem("locationInfo",JSON.stringify(a.data.data)),e.isInDeliverArea(),o.next=11;break;case 9:o.prev=9,o.t0=o["catch"](0);case 11:case"end":return o.stop()}}),o,null,[[0,9]])})))()},location:function(){this.jsSdkConfig()},jsSdkConfig:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=t,a=JSON.parse(localStorage.getItem("setUsersInfo")).member.memberNo,U.a.ready((function(){console.log("wtm进来了"),U.a.getLocation({type:"gcj02",success:function(t){var e="";e=t.latitude+","+t.longitude,o.shopInfo(o.storeNo,e),o.parseByLocation(e)},cancel:function(t){o.shopInfo(o.storeNo),w["a"].alert({message:"定位失败，权限不足"}).then((function(){}))},error:function(t){o.shopInfo(o.storeNo),w["a"].alert({message:"定位失败，权限不足"}).then((function(){}))}});var t="".concat(window.location.href,"?memberNo=").concat(a);U.a.updateAppMessageShareData({title:"CO-LUCKEY",desc:"CO-LUCKEY",link:t,imgUrl:"../../assets/logotitle.png",success:function(t){o.isShowSharp=!1}}),U.a.onMenuShareTimeline({title:"CO-LUCKEY",link:t,imgUrl:"../../assets/logotitle.png",success:function(t){o.isShowSharp=!1}})})),U.a.error((function(t){o.shopInfo(o.storeNo)}));case 4:case"end":return e.stop()}}),e)})))()},handleAdd:function(t,e,o){var a=this,s=JSON.parse(localStorage.getItem("cart".concat(this.storeNo)))?JSON.parse(localStorage.getItem("cart".concat(this.storeNo))):[];this.localFoods=s;var n=!1,c=0;if(s.length>0&&(s.forEach((function(i,r){i.foodId===a.foods[t].foodList[e].foodId&&(c=parseInt(c)+parseInt(i.num),o?JSON.stringify(o)==JSON.stringify(i.sizeList)&&(console.log(i.sizeList.reduce((function(t,e){return t+e.tagValue.price}),0)),i.num=i.num+1,a.$set(s[r],"num",i.num),a.$set(s[r],"totalprice",parseInt(i.num*(1e3*i.price+1e3*i.packAmount+1e3*i.sizeList.reduce((function(t,e){return t+e.tagValue.price}),0)))/1e3),n=!0):o||i.sizeList||(i.num=i.num+1,a.$set(s[r],"num",i.num),a.$set(s[r],"totalprice",parseInt(i.num*(1e3*i.price+1e3*i.packAmount))/1e3),n=!0))})),this.$set(this.foods[t].foodList[e],"num",++c),this.localFoods=s),0===this.localFoods.length||!n){var r=Object(i["a"])({},this.foods[t].foodList[e]),l=r.foodId,u=r.price,d=r.foodTypeId,h=r.foodName,f=r.packAmount,p={foodId:l,price:u,foodTypeId:d,foodName:h,packAmount:f,num:1};o?(p.sizeList=o,this.$set(this.foods[t].foodList[e],"num",parseInt(c))):this.$set(this.foods[t].foodList[e],"num",1),p.totalprice=p.price+p.packAmount,this.localFoods.push(p)}this.total+=1,localStorage.setItem("cart".concat(this.storeNo),JSON.stringify(this.localFoods))},handleAdd1:function(t){var e=this,o=Object(n["a"])(this.localFoods);this.foods.forEach((function(a,s){a.foodList.forEach((function(a,n){a.foodId===o[t].foodId&&e.handleAdd(s,n,o[t].sizeList)}))}))},handleReduce:function(t,e,o){var a=this;this.total-=1;var s=0,i=JSON.parse(localStorage.getItem("cart".concat(this.storeNo)));i.forEach((function(c,r){c.foodId===a.foods[t].foodList[e].foodId&&(s=parseInt(s)+parseInt(c.num),o?JSON.stringify(o)==JSON.stringify(c.sizeList)&&(c.num=c.num-1,a.$set(i[r],"num",c.num),a.$set(i[r],"totalprice",parseInt(c.num*(1e3*c.price+1e3*c.packAmount+1e3*c.sizeList.reduce((function(t,e){return t+e.tagValue.price}),0)))/1e3),a.localFoods=Object(n["a"])(i),0===a.localFoods[r].num?(a.localFoods.splice(r,1),0===a.localFoods.length?(localStorage.removeItem("cart".concat(a.storeNo)),a.show=!1):localStorage.setItem("cart".concat(a.storeNo),JSON.stringify(a.localFoods))):localStorage.setItem("cart".concat(a.storeNo),JSON.stringify(a.localFoods))):o||c.sizeList||(c.num=c.num-1,a.$set(i[r],"num",c.num),a.$set(i[r],"totalprice",parseInt(c.num*(1e3*c.price+1e3*c.packAmount))/1e3),a.localFoods=Object(n["a"])(i),0===a.localFoods[r].num?(a.localFoods.splice(r,1),0===a.localFoods.length?(localStorage.removeItem("cart".concat(a.storeNo)),a.show=!1):localStorage.setItem("cart".concat(a.storeNo),JSON.stringify(a.localFoods))):localStorage.setItem("cart".concat(a.storeNo),JSON.stringify(a.localFoods))))})),this.$set(this.foods[t].foodList[e],"num",--s),this.specification=this.localFoods.map((function(t){var e="";if(t.sizeList){var o=t.sizeList;return o.forEach((function(t){e=e+t.tagValue.sizeName+" "})),e}return e}))},handleReduce1:function(t){var e=this,o=Object(n["a"])(this.localFoods);this.foods.forEach((function(a,s){a.foodList.forEach((function(a,n){a.foodId===o[t].foodId&&e.handleReduce(s,n,o[t].sizeList)}))}))},handleActivity:function(t){var e=this,o=[];this.shopImg.forEach((function(t){o.push("".concat(e.$imgUrl).concat(t))})),Object(m["a"])({images:o,startPosition:t})},handleCart:function(){0===this.localFoods.length?this.show=!1:(this.specification=this.localFoods.map((function(t){var e="";if(t.sizeList){var o=t.sizeList;return o.forEach((function(t){e=e+t.tagValue.sizeName+" "})),e}return e})),this.show=!0)},toSumbitOrderNow:function(){this.handleAccount()},handleAccount:function(){localStorage.removeItem("buy".concat(this.storeNo)),this.total>0?this.settlementOrder():w["a"].alert({message:"您还没添加购买的商品哦！"}).then((function(){}))},foodNemuList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o,a,s,n,i,c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o="",a=[],s={},s.eatTime="3",s.storeNo=t.storeNo,e.next=7,Object(S["v"])(s);case 7:n=e.sent,console.log(n,"menuByCategory========",t.loading,"loading"),t.foods=n.data.data,console.log(t.foods,"this.foods=="),i=JSON.parse(localStorage.getItem("cart".concat(t.storeNo)))?JSON.parse(localStorage.getItem("cart".concat(t.storeNo))):[],i.length<=0&&(i=JSON.parse(localStorage.getItem("orderDetailCart"))?JSON.parse(localStorage.getItem("orderDetailCart")):[]),t.localFoods=i,t.foods.forEach((function(e,o){e.foodList.forEach((function(e,a){t.$set(t.foods[o].foodList[a],"num",0)}))})),t.localFoods.length>0&&(t.foods.forEach((function(e,o){e.foodList.forEach((function(e,s){t.localFoods.forEach((function(n,i){if(n.foodId===e.foodId)if(n.sizeList){t.total=t.total+n.num;var c=e.sizeList.map((function(t){return t.tagValue})).flat();t.$set(t.localFoods[i],"totalprice",parseInt(1e3*(e.price+e.packAmount+n.sizeList.reduce((function(t,e){return t+(c.find((function(t){return t.sizeId==e.tagValue.sizeId}))||{price:0}).price}),0))*n.num)/1e3),t.$set(t.localFoods[i],"price",e.price),t.$set(t.localFoods[i],"sizeList",n.sizeList),t.$set(t.foods[o].foodList[s],"num",t.foods[o].foodList[s].num+n.num),a.push(n.foodId)}else t.$set(t.foods[o].foodList[s],"num",n.num),t.total=t.total+n.num,t.$set(t.localFoods[i],"totalprice",parseInt(1e3*(e.price+e.packAmount)*n.num)/1e3),t.$set(t.localFoods[i],"price",e.price),a.push(n.foodId)}))}))})),t.localFoods.length!==a.length&&(c=!1,r=[],t.localFoods.forEach((function(t){c=!1;for(var e=0;e<a.length;e++)if(a[e]==t.foodId){c=!0,r.push(t);break}c||(o="“"+o+t.foodName+"” ")})),t.localFoods=r),localStorage.setItem("cart".concat(t.storeNo),JSON.stringify(t.localFoods)),localStorage.removeItem("orderDetailCart")),setTimeout((function(){if(t.loadingPage=!1,""===o)return!1;w["a"].alert({message:"当前的"+o+"已经下架或者已经售罄了哦"}).then((function(){}))}),0);case 17:case"end":return e.stop()}}),e)})))()},shopInfo:function(t,e){var o=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s={},!e){a.next=7;break}return a.next=4,Object(S["S"])({storeNo:t,latAndLng:e});case 4:s=a.sent,a.next=10;break;case 7:return a.next=9,Object(S["S"])({storeNo:t});case 9:s=a.sent;case 10:o.shop=s.data.data,o.storeAdvertise=Object(n["a"])(JSON.parse(s.data.data.storeAdvertise)),o.storeAdvertiseTwo=Object(n["a"])(JSON.parse(s.data.data.storeAdvertiseTwo)),o.shopImg=Object(n["a"])(JSON.parse(o.shop.storeEnvironmentImg)),setTimeout((function(){console.log("没有菜单===222"),o.loading=!1}),200);case 15:case"end":return a.stop()}}),a)})))()},handleClick:function(t){this.showShop=1===t},getNearestChainStore:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(S["m"])({chainStoreNo:e.storeNo,latAndLng:t});case 2:if(a=o.sent,e.storeNo!=a.data.data){o.next=10;break}return e.isFromPoster=!1,e.shopInfo(a.data.data,t),e.parseByLocation(t),o.abrupt("return",!1);case 10:return e.isFromPoster=!1,e.shopInfo(a.data.data,t),e.parseByLocation(t),o.abrupt("return",!1);case 14:case"end":return o.stop()}}),o)})))()}},created:function(){var t=this;this.isShowCounpon=sessionStorage.getItem("isShowCounpon"),this.isShowCounpon?this.isShowCounpon=!1:(this.isShowCounpon=!0,sessionStorage.setItem("isShowCounpon",!0)),console.log(this.isShowCounpon),this.storeNo=JSON.parse(localStorage.getItem("storeNo")),this.storeCouponList();var e=new URLSearchParams(window.location.search),o=e.get("memberNo");o&&localStorage.setItem("memberNo",o),localStorage.setItem("type","1"),Object(A["a"])()&&this.isReceive(),console.log("点餐页面====="),this.couponName=this.$route.query.couponName,console.log(this.couponName,"99999"),this.locationInfo=JSON.parse(localStorage.getItem("locationInfo")||"{}"),console.log(this.locationInfo.landmark),console.log("地址信息===",this.locationInfo),this.storeNo=this.$route.params.storeNo||localStorage.getItem("storeNo");var a=this.$route.query.memberNo||null;a&&(localStorage.setItem("inviterNo",JSON.stringify(a)),this.$router.push("/foods1/".concat(this.storeNo))),localStorage.removeItem("orderNo");var s=JSON.parse(localStorage.getItem("sendType"));this.type=s||"0",setTimeout((function(){t.foodNemuList()}),100),this.location()},mounted:function(){var t=this;this.$nextTick((function(){t.type=JSON.parse(localStorage.getItem("sendType"))||"0",setTimeout((function(){t.couponList()}),1e3)}))}},E=F,x=(o("11f2"),Object(O["a"])(E,a,s,!1,null,"751c86fb",null));e["default"]=x.exports},"7cc7":function(t,e,o){},"7db0":function(t,e,o){"use strict";var a=o("23e7"),s=o("b727").find,n=o("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(i)},"8c8a":function(t,e,o){t.exports=o.p+"static/img/couponFindnot.263bac41.png"},"9a20":function(t,e,o){"use strict";o("bf45")},a2bf:function(t,e,o){"use strict";var a=o("e8b5"),s=o("07fa"),n=o("0366"),i=function(t,e,o,c,r,l,u,d){var h,f,p=r,g=0,m=!!u&&n(u,d,3);while(g<c){if(g in o){if(h=m?m(o[g],g,e):o[g],l>0&&a(h))f=s(h),p=i(t,e,h,f,p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=h}p++}g++}return p};t.exports=i},bea2:function(t,e,o){t.exports=o.p+"static/img/shareimg1.9a9bfcfe.png"},bf45:function(t,e,o){}}]);