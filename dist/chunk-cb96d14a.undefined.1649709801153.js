(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb96d14a"],{"159b":function(t,n,o){var a=o("da84"),e=o("fdbc"),c=o("785a"),s=o("17c2"),i=o("9112"),r=function(t){if(t&&t.forEach!==s)try{i(t,"forEach",s)}catch(n){t.forEach=s}};for(var u in e)e[u]&&r(a[u]&&a[u].prototype);r(c)},"17c2":function(t,n,o){"use strict";var a=o("b727").forEach,e=o("a640"),c=e("forEach");t.exports=c?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},2019:function(t,n,o){},"8c8a":function(t,n,o){t.exports=o.p+"static/img/couponFindnot.263bac41.png"},"905e":function(t,n,o){"use strict";o("2019")},a640:function(t,n,o){"use strict";var a=o("d039");t.exports=function(t,n){var o=[][t];return!!o&&a((function(){o.call(null,n||function(){throw 1},1)}))}},c71c:function(t,n,o){"use strict";o.r(n);var a=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"discount"},[a("van-nav-bar",{staticClass:"title",attrs:{"left-text":"返回","left-arrow":"",title:"优惠券页面",fixed:""},on:{"click-left":t.onClickLeft}}),t.Loading?a("Loading",{attrs:{loading:t.loadingPage}}):a("div",[0==t.couponData.length?a("div",{staticClass:"no_coupon"},[a("img",{attrs:{src:o("8c8a"),alt:""}})]):a("div",{staticClass:"coupon_content"},[t._l(t.couponData,(function(n,o){return a("div",{key:o,staticClass:"content"},[a("div",{staticClass:"left"},[2==n.discountType?a("span",[t._v(t._s(n.discountProportionShow)),a("span",{staticClass:"company"},[t._v("折")])]):3==n.discountType?a("span",[a("span",{staticClass:"company"},[t._v("统一￥"),a("br")]),t._v(t._s(n.discountPrice))]):a("span",[a("span",{staticClass:"company"},[t._v("￥")]),t._v(t._s(n.discountPrice))])]),a("div",{staticClass:"center"},[a("div",{staticClass:"name"},[t._v(t._s(n.storeName))]),a("div",{staticClass:"couponName"},[a("span",[t._v("·")]),a("div",[t._v(t._s(n.couponName))])]),1==n.discountType?a("div",{staticClass:"discountprice"},[a("span",[t._v("·")]),a("div",[t._v("满"+t._s(n.thresholdPrice)+"元可用")])]):t._e(),a("div",{staticClass:"couponName"},[a("span",[t._v("·")]),a("div",[t._v("类型："+t._s(t.couponType[n.discountType]))])])]),a("div",{staticClass:"right",on:{click:function(o){return t.handleChoose(n.id)}}},[t._v(" 立即 "),a("br"),t._v(" 领取 ")])])})),a("div",{staticClass:"all_choosed",on:{click:t.handleAllChoose}},[t._v("一键领取")])],2)])],1)},e=[],c=o("1da1"),s=(o("96cf"),o("4de4"),o("159b"),o("d3b7"),o("3ca3"),o("ddb0"),o("9861"),o("ac1f"),o("841c"),o("4ec3")),i=o("2b0e"),r=o("543e"),u=o("d399"),d=o("0b33"),l=o("5e46"),p=o("2241");i["a"].use(r["a"]),i["a"].use(u["a"]),i["a"].use(d["a"]),i["a"].use(l["a"]);var f={data:function(){return{couponData:[],Loading:!0,storeNo:"",couponIdList:[],clicked:!1,loadingPage:!0,couponType:{1:"满减",2:"折扣",3:"统一价"}}},methods:{handleChoose:function(t){if(console.log("lingqu"),this.clicked)return!1;this.clicked=!0,this.couponIdList=[],this.couponIdList.push(t),this.couponData=this.couponData.filter((function(n){return n.id!=t})),this.getCoupon()},handleAllChoose:function(){var t=this;if(this.clicked)return!1;this.clicked=!0,this.couponIdList=[],this.couponData.forEach((function(n,o){t.couponIdList.push(n.id)})),u["a"].loading({message:"一键领取中...",forbidClick:!0,loadingType:"spinner",duration:3e3}),setTimeout((function(){t.couponData=[],t.getCoupon()}),3e3)},storeCouponList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["U"])({storeNo:t.storeNo});case 2:o=n.sent,200===o.status&&(t.Loading=!1,t.loadingPage=!1),t.couponData=o.data.data?o.data.data:[];case 5:case"end":return n.stop()}}),n)})))()},getCoupon:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["g"])(t.couponIdList);case 2:o=n.sent,p["a"].confirm({message:o.data.msg,confirmButtonText:"去下单",cancelButtonText:"继续领取"}).then((function(){localStorage.setItem("getcoupon",!0),t.$router.back()})).catch((function(){t.clicked=!1}));case 4:case"end":return n.stop()}}),n)})))()},onClickLeft:function(){this.$router.push("foods1/"+this.storeNo)}},created:function(){this.storeNo=JSON.parse(localStorage.getItem("storeNo")),this.storeCouponList();var t=new URLSearchParams(window.location.search),n=t.get("memberNo");n&&localStorage.setItem("memberNo",n)}},h=f,v=(o("905e"),o("2877")),g=Object(v["a"])(h,a,e,!1,null,"11fff01c",null);n["default"]=g.exports}}]);