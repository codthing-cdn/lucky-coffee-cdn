(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf914d90"],{"07ac":function(t,e,o){var a=o("23e7"),n=o("6f53").values;a({target:"Object",stat:!0},{values:function(t){return n(t)}})},"092c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAMAAAAPzWOAAAAAZlBMVEUdTEQdTEQdTEQYSEAtWFGpu7hef3ro7ewSRDwnVEzk6umtvrshT0jq7+5ggXxPc273+fny9PSzw8CAmpdlhYBJb2k+Zl+kt7RVeHL9/v3t8fDf5eTDz829y8iitrOdsa6HoJw2YFkA2QaUAAAAAnRSTlPu3tcF7IkAAAEaSURBVFjD7djbjoMgEAZgl2FgOCietef2/V9ym2yzwYvWZIdkbcN/ORdfAmL8pfgquLkTXrDjC5EgRZHAyEhGtoIA3QMc5KGA4CFejiGM0jMQEGboELvBCPg7AlKhtagksJC+bZq2ZyKVK0tXsRGt2YhCrVFlJCNLBOIQmfls7Xk2RBBnBVkoBD5crL0ED7Qw4CXijYxizE1N1k7qZpZz/wIBIQdVqSj99bTfn659PKvUIAU8RQjGDh3+ZkJ3PNT14egwisNuBHqOUGh1qaOUTb3b1c1ypttASZH15eD6ctY3dl7ZWO4j5h+2NMf+bd7ijLwT8vNB30K1iEsOv26lKX78Cvr/ZfhRy7fwg5CRD0BEgiS5hElyHfQN5bA1Hhyw/GoAAAAASUVORK5CYII="},"159b":function(t,e,o){var a=o("da84"),n=o("fdbc"),i=o("785a"),r=o("17c2"),c=o("9112"),s=function(t){if(t&&t.forEach!==r)try{c(t,"forEach",r)}catch(e){t.forEach=r}};for(var f in n)n[f]&&s(a[f]&&a[f].prototype);s(i)},"17c2":function(t,e,o){"use strict";var a=o("b727").forEach,n=o("a640"),i=n("forEach");t.exports=i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"2aea":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAARKADAAQAAAABAAAARAAAAADA2cO/AAACL0lEQVR4Ae3cvUoDQRQF4DtL1p+IXeIPKMHOBxDEwi5NiNjq49naCiGN2Nj6ADYWWqkJWAQhJmHHcxMROSDsgkXMnoGRvRjC3M+zNrM7Yfek+WBm65hDzDFmGUeKplcwBxX82PgqnixYD9flG9HqaHobc9VBMsw+MK5iZre4Lt0IiR1btHM0XnWQfjB7CZldP3auO6XTQMONdvMjBjuMZpsJkhFjtAwxmZQRw3v23t3ALRJEJVhiFeislRVk2jsM3CIpK8JvfQuEZAQiEBKgUgkRCAlQqYQIhASoVEIEQgJUKiECIQEqlRCBkACVSohASIBKJUQgJEClEiIQEqBSCREICVCphAiEBKhUQgRCAlQqIQTiu/+5x1arVU+T0T62QP15irkf2LvujbOl++duN/dzL4VA0jBpYGv8LAQ7mHsNX2C0O6z5Ale5QXTLONyPUSgh41h5TOPoEs9S3Pz4jrm9xINAPV9zkQUWAvm6F3PHr8hC5uWzumXoLyEQgZAAlUqIQEiASiVEICRApRIiEBKgUgkRCAlQqYQIhASoVEIEQgJUKiECIQEqlRCBkACVSohASIBKJUQgJEClEiIQEqBy+qo7XvKeYNvvnX5XmnLaOwy+X3XHbn6Ce6fQtuYiaXnvbuCvujtCDe++V3EKQHOn3VxepEbz9pLNjsvYw+enx2X4P9YadE5xEsBR3i9ZqM/NDlSpoaehJ+QV04/cSYHyL54Mwlr/eviRO2+Yg0/VTmJDnMC5VQAAAABJRU5ErkJggg=="},"427e":function(t,e,o){},5530:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));o("b64b"),o("a4d3"),o("4de4"),o("e439"),o("159b"),o("dbb4");var a=o("ade3");function n(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function i(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(e){Object(a["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}},"6f53":function(t,e,o){var a=o("83ab"),n=o("df75"),i=o("fc6a"),r=o("d1e7").f,c=function(t){return function(e){var o,c=i(e),s=n(c),f=s.length,d=0,u=[];while(f>d)o=s[d++],a&&!r.call(c,o)||u.push(t?[o,c[o]]:c[o]);return u}};t.exports={entries:c(!0),values:c(!1)}},"7c3e":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main-food-detail"},[o("van-nav-bar",{attrs:{title:"产品详情","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),o("div",{staticClass:"food-content"},[o("div",{staticClass:"food-banner"},[t.foodInfo.foodGallery?[o("van-swipe",{staticClass:"my_swipe",attrs:{autoplay:5e3,"indicator-color":"white"}},t._l(t.foodInfo.foodGallery,(function(t,e){return o("van-swipe-item",{key:e},[o("img",{attrs:{src:t,alt:""}})])})),1)]:[o("img",{attrs:{src:t.foodInfo.foodImg}})]],2),o("div",{staticClass:"food-specifications"},[o("div",{staticClass:"food-name"},[t._v(t._s(t.foodInfo.foodName))]),t._l(t.foodInfo.sizeList,(function(e,a){return o("div",{key:a},[o("div",{key:a,staticClass:"specifications"},[o("div",{staticClass:"title"},[t._v(t._s(e.number))]),o("div",{staticClass:"specificationsed"},t._l(e.tagValue,(function(a,n){return o("div",{key:n},[o("div",{key:n,staticClass:"value"},[o("div",{staticClass:"value-item",class:{selected:(t.specificationsMap[e.number]||{}).sizeId===a.sizeId},on:{click:function(o){return t.selectSpecifications(e.number,a)}}},[t._v(" "+t._s(a.sizeName)+" ")])])])})),0)])])}))],2),o("div",{staticClass:"food-detail"},[o("div",{staticClass:"title"},[t._v("产品详情")]),o("div",{staticClass:"content",domProps:{innerHTML:t._s(t.foodInfo.foodIntro)}})])]),o("div",{staticClass:"food-bottom"},[o("div",{staticClass:"top"},[o("div",{staticClass:"top-left"},[o("div",{staticClass:"price"},[o("div",{staticClass:"price-now"},[t._v("￥"+t._s(t.totalPrice))])]),o("div",{staticClass:"specifications"},[t._v(" "+t._s(t._f("formatSpecificationsMap")(t.specificationsMap))+" ")])]),o("div",{staticClass:"top-right"},[o("div",{staticClass:"operation"},[o("img",{staticClass:"reduce",attrs:{src:t.reduceBtn},on:{click:t.reduce}}),o("div",{staticClass:"num"},[t._v(t._s(t.foodNumber))]),o("img",{staticClass:"add",attrs:{src:t.addBtn},on:{click:t.add}})])])]),o("div",{staticClass:"bottom"},[o("div",{staticClass:"bottom-btn-left",on:{click:t.addCart}},[t._v("加入购物车")]),o("div",{staticClass:"bottom-btn-right",on:{click:t.toCheckout}},[t._v("立即支付")])])])],1)},n=[],i=o("ade3"),r=o("5530"),c=o("1da1"),s=(o("96cf"),o("99af"),o("d81d"),o("b64b"),o("a15b"),o("07ac"),o("c740"),o("092c")),f=o.n(s),d=o("fa7d"),u=o("2241"),l=o("2aea"),A=o.n(l),p=o("4ec3"),b=o("18a0"),h=o.n(b),m=o("2b0e"),g=o("5596"),v=o("2bb1");m["a"].use(g["a"]),m["a"].use(v["a"]);var I={data:function(){return{addBtn:f.a,reduceBtn:A.a,foodInfo:{price:0},foodNumber:1,specificationsMap:{},sizeList:[]}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(d["a"])(!0),e.prev=1,e.next=4,Object(p["r"])();case 4:return o=e.sent,o&&o.data&&o.data.data.memberTelephone||u["a"].confirm({message:"请先去绑定手机号",title:"温馨提示"}).then((function(){console.log("请先去绑定手机号"),h.a.miniProgram.redirectTo({url:"/pages/bindPhone/bindPhone?callBackPath=".concat(encodeURIComponent(window.location.href),"&token=").concat(JSON.parse(localStorage.getItem("token")))})})).catch((function(){window.location="/foods1/"+localStorage.getItem("storeNo")||!1})),e.next=8,Object(p["I"])({foodId:t.$route.query.foodId});case 8:a=e.sent,a.data.data.sizeList&&(a.data.data.sizeList=a.data.data.sizeList),console.log(a.data.data),Array.isArray(a.data.data.sizeList)&&(a.data.data.sizeList.map((function(e){t.specificationsMap[e.number]=Object(r["a"])({},e.tagValue[0])})),t.sizeList=Object.keys(t.specificationsMap).map((function(e){return{number:e,tagValue:Object(r["a"])({},t.specificationsMap[e])}}))),t.foodInfo=a.data.data,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))()},filters:{formatSpecificationsMap:function(t){return Object.values(t).map((function(t){return t.sizeName})).join(",")}},computed:{totalPrice:function(){return(this.foodInfo.price+Object.values(this.specificationsMap).reduce((function(t,e){return t+e.price}),0))*this.foodNumber}},methods:{toCheckout:function(){var t=localStorage.getItem("storeNo")||114;localStorage.removeItem("buy".concat(t));var e={foodId:this.foodInfo.foodId,foodName:this.foodInfo.foodName,foodTypeId:this.foodInfo.foodTypeId,num:this.foodNumber,packAmount:this.foodInfo.packAmount*this.foodNumber,price:this.foodInfo.price,totalprice:this.totalPrice};this.sizeList.length>0&&(e.sizeList=this.sizeList);var o=JSON.parse(localStorage.getItem("buy".concat(t))||"[]");o.push(e),localStorage.setItem("buy".concat(t),JSON.stringify(o)),this.$router.push({path:"/account",query:{storeNo:localStorage.getItem("storeNo")||114,foodList:encodeURIComponent(JSON.stringify([e]))}})},selectSpecifications:function(t,e){var o=this;this.specificationsMap=Object(r["a"])(Object(r["a"])({},this.specificationsMap),{},Object(i["a"])({},t,e)),this.sizeList=Object.keys(this.specificationsMap).map((function(t){return{number:t,tagValue:Object(r["a"])({},o.specificationsMap[t])}})),console.log(this.specificationsMap)},reduce:function(){this.foodNumber>1&&this.foodNumber--},add:function(){this.foodNumber++},addCart:function(){var t=this;console.log("addCart");var e=localStorage.getItem("storeNo")||114,o=JSON.parse(localStorage.getItem("cart".concat(e))||"[]"),a=o.findIndex((function(e){return e.foodId===t.foodInfo.foodId}));a>-1&&JSON.stringify(o[a].sizeList)==JSON.stringify(this.sizeList)?o[a]=Object(r["a"])(Object(r["a"])({},o[a]),{},{num:o[a].num+this.foodNumber,packAmount:o[a].packAmount+this.foodInfo.packAmount*this.foodNumber,totalprice:o[a].totalprice+this.totalPrice}):o.push({foodId:this.foodInfo.foodId,foodName:this.foodInfo.foodName,foodTypeId:this.foodInfo.foodTypeId,num:this.foodNumber,packAmount:this.foodInfo.packAmount*this.foodNumber,price:this.foodInfo.price,totalprice:this.totalPrice,sizeList:this.sizeList}),localStorage.setItem("cart".concat(e),JSON.stringify(o)),this.$toast("添加购物车成功"),this.$router.back(),console.log(o)},onClickLeft:function(){this.$router.back()}}},O=I,C=(o("95f5"),o("2877")),y=Object(C["a"])(O,a,n,!1,null,"6ecbc0f4",null);e["default"]=y.exports},"95f5":function(t,e,o){"use strict";o("427e")},a15b:function(t,e,o){"use strict";var a=o("23e7"),n=o("44ad"),i=o("fc6a"),r=o("a640"),c=[].join,s=n!=Object,f=r("join",",");a({target:"Array",proto:!0,forced:s||!f},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a640:function(t,e,o){"use strict";var a=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&a((function(){o.call(null,e||function(){throw 1},1)}))}},ade3:function(t,e,o){"use strict";function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o.d(e,"a",(function(){return a}))},b64b:function(t,e,o){var a=o("23e7"),n=o("7b0b"),i=o("df75"),r=o("d039"),c=r((function(){i(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(t){return i(n(t))}})},c740:function(t,e,o){"use strict";var a=o("23e7"),n=o("b727").findIndex,i=o("44d2"),r="findIndex",c=!0;r in[]&&Array(1)[r]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(r)},d81d:function(t,e,o){"use strict";var a=o("23e7"),n=o("b727").map,i=o("1dde"),r=i("map");a({target:"Array",proto:!0,forced:!r},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,o){var a=o("23e7"),n=o("83ab"),i=o("56ef"),r=o("fc6a"),c=o("06cf"),s=o("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,o,a=r(t),n=c.f,f=i(a),d={},u=0;while(f.length>u)o=n(a,e=f[u++]),void 0!==o&&s(d,e,o);return d}})},e439:function(t,e,o){var a=o("23e7"),n=o("d039"),i=o("fc6a"),r=o("06cf").f,c=o("83ab"),s=n((function(){r(1)})),f=!c||s;a({target:"Object",stat:!0,forced:f,sham:!c},{getOwnPropertyDescriptor:function(t,e){return r(i(t),e)}})},fa7d:function(t,e,o){"use strict";o.d(e,"a",(function(){return s})),o.d(e,"b",(function(){return f})),o.d(e,"c",(function(){return d}));var a=o("1da1"),n=(o("96cf"),o("99af"),o("a078")),i=o("4ec3"),r=o("18a0"),c=o.n(r),s=function(t){var e=JSON.parse(localStorage.getItem("token"));return!!e||(t&&Object(n["a"])({redirectPath:"/blank"}),!1)},f=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["r"])();case 2:if(o=t.sent,o&&o.data&&o.data.data.memberTelephone){t.next=7;break}return e.$toast("请先绑定手机号"),c.a.miniProgram.reLaunch({url:"/pages/bindPhone/bindPhone?nextPath=".concat(encodeURIComponent("https://m.yiqiwen.cn/dist/tlzb?phone="),"&token=").concat(JSON.parse(localStorage.getItem("token")))}),t.abrupt("return");case 7:c.a.miniProgram.reLaunch({url:"/pages/thirdParty/thirdParty?webUrl=".concat(encodeURIComponent("https://m.yiqiwen.cn/dist/tlzb?phone=".concat(o.data.data.memberTelephone)),"&token=").concat(JSON.parse(localStorage.getItem("token")))});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(t){c.a.miniProgram.navigateTo({url:"/pages/payment/payment?token=".concat(JSON.parse(localStorage.getItem("token")),"&").concat(t)})}}}]);