(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a695478"],{"0cb2":function(e,t,r){var n=r("7b0b"),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,c,u,l){var h=r+e.length,d=c.length,f=s;return void 0!==u&&(u=n(u),f=a),i.call(l,f,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(h);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return n;if(s>d){var l=o(s/10);return 0===l?n:l<=d?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):n}a=c[s-1]}return void 0===a?"":a}))}},"498a2":function(e,t,r){"use strict";var n=r("23e7"),o=r("58a8").trim,i=r("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},5319:function(e,t,r){"use strict";var n=r("d784"),o=r("d039"),i=r("825a"),a=r("1626"),s=r("5926"),c=r("50c4"),u=r("577e"),l=r("1d80"),h=r("8aa5"),d=r("dc4a"),f=r("0cb2"),v=r("14c3"),p=r("b622"),m=p("replace"),g=Math.max,b=Math.min,$=function(e){return void 0===e?e:String(e)},y=function(){return"$0"==="a".replace(/./,"$0")}(),C=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),w=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,r){var n=C?"$":"$0";return[function(e,r){var n=l(this),o=void 0==e?void 0:d(e,m);return o?o.call(e,n,r):t.call(u(n),e,r)},function(e,o){var l=i(this),d=u(e);if("string"===typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var p=r(t,l,d,o);if(p.done)return p.value}var m=a(o);m||(o=u(o));var y=l.global;if(y){var C=l.unicode;l.lastIndex=0}var w=[];while(1){var x=v(l,d);if(null===x)break;if(w.push(x),!y)break;var k=u(x[0]);""===k&&(l.lastIndex=h(d,c(l.lastIndex),C))}for(var N="",q=0,P=0;P<w.length;P++){x=w[P];for(var T=u(x[0]),I=g(b(s(x.index),d.length),0),O=[],R=1;R<x.length;R++)O.push($(x[R]));var S=x.groups;if(m){var _=[T].concat(O,I,d);void 0!==S&&_.push(S);var j=u(o.apply(void 0,_))}else j=f(T,d,I,O,S,o);I>=q&&(N+=d.slice(q,I)+j,q=I+T.length)}return N+d.slice(q)}]}),!w||!y||C)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),o=r("577e"),i=r("5899"),a="["+i+"]",s=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(e){return function(t){var r=o(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},"592c":function(e,t,r){},"6b6b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-header"},[e._v("绑定手机号")]),r("van-cell-group",[r("van-field",{attrs:{clearable:"",placeholder:"请输入手机号","error-message":e.error.telephone},on:{input:e.handleInput},model:{value:e.user.telephone,callback:function(t){e.$set(e.user,"telephone",t)},expression:"user.telephone"}},[r("template",{slot:"left-icon"},[r("i",{staticClass:"iconfont icon-icon207 login-phone"})])],2),r("van-field",{directives:[{name:"show",rawName:"v-show",value:e.showCode,expression:"showCode"}],staticClass:"code",attrs:{clearable:"",placeholder:"请输入验证码","error-message":e.error.verifyCode},model:{value:e.user.verifyCode,callback:function(t){e.$set(e.user,"verifyCode",t)},expression:"user.verifyCode"}},[r("van-button",{staticClass:"mycode",attrs:{slot:"button",type:"default",disabled:e.isclick,size:"small",round:""},on:{click:e.getcode},slot:"button"},[e._v(e._s(e.isclick?"倒计时"+e.codeTime+"s":"发送验证码"))])],1)],1),r("div",{staticClass:"login-btn"},[r("van-button",{staticClass:"l-btn",attrs:{type:"info",size:"large"},on:{click:e.handleBind}},[e._v("绑定")])],1),r("div",{staticClass:"no_bind",on:{click:e.handleNoBind}},[e._v("暂时不绑定")])],1)},o=[],i=r("1da1"),a=(r("96cf"),r("ac1f"),r("5319"),r("498a2"),r("8e43")),s={data:function(){return{showCode:!1,user:{telephone:"",verifyCode:""},error:{telephone:"",verifyCode:""},codeTime:60,timer:null,isclick:!1,memberNo:"",isbinding:!1,prevBindUrl:"",storeNo:""}},methods:{loadingTime:function(e){var t=this;this.loadingPage=!0,setTimeout((function(){t.loadingPage=!1,t.$router.replace(e)}),2e3)},handleNoBind:function(){this.$router.replace("home/")},handleInput:function(){this.error.telephone="",this.error.verifyCode=""},sendVerifyCode:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(a["d"])({telephone:e.user.telephone});case 3:e.isclick=!0,e.timer=setInterval((function(){e.codeTime--,e.codeTime<=0&&(e.isclick=!1,clearTimeout(e.timer),e.codeTime=60,e.timer=null)}),1e3),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},vaildData:function(){return 0===this.user.telephone.trim().length?(this.error.telephone="手机号不能为空",!1):/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.user.telephone)?(this.error.telephone="",0===this.user.verifyCode.trim().length&&1==this.showCode?(this.error.verifyCode="验证码不能为空",!1):(this.error.verifyCode="",!0)):(this.error.telephone="手机号格式错误，请重写",!1)},getcode:function(){return 0===this.user.telephone.trim().length?(this.error.telephone="手机号不能为空",!1):/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.user.telephone)?void this.sendVerifyCode():(this.error.telephone="手机号格式错误，请重写",!1)},bindTelephone:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(a["a"])(e);case 3:n=r.sent,localStorage.setItem("token",JSON.stringify(n.data.data.token)),t.$store.commit("setUsersInfo",n.data.data),t.$toast("绑定成功"),setTimeout((function(){if(console.log(t.$route.query.nextPath),t.$route.query.nextPath)return"back"==t.$route.query.nextPath?void t.$router.back():void(window.location.href=t.$route.query.nextPath+t.user.telephone);t.$route.query.psong?t.$router.back():t.$route.query.isPhone?t.loadingTime("/luckdraw?orderNo=".concat(t.$route.query.orderNo,"&isPhone=2")):t.$router.replace("foods1/"+t.storeNo)}),1e3),r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](0);case 12:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleBind:function(){var e=this;if(console.log(!this.vaildData(),this.isbinding),!this.vaildData())return!1;if(this.isbinding)return!1;var t={};t.memberNo=this.memberNo,t.telephone=this.user.telephone,t.verifyCode=this.user.verifyCode,this.isbinding=!0,this.bindTelephone(t),setTimeout((function(){e.isbinding=!1}),2e3)}},created:function(){console.log(this.$route.query.showCode,"this.$route.query.showCode"),this.$route.query.isPhone&&(this.isPhone=this.$route.query.isPhone),this.$route.query.showCode&&(this.showCode=this.$route.query.showCode),this.memberNo=JSON.parse(localStorage.getItem("setUsersInfo")).member.memberNo,this.storeNo=JSON.parse(localStorage.getItem("storeNo"))}},c=s,u=(r("ec7b"),r("2877")),l=Object(u["a"])(c,n,o,!1,null,"6b859062",null);t["default"]=l.exports},c8d2:function(e,t,r){var n=r("5e77").PROPER,o=r("d039"),i=r("5899"),a="​᠎";e.exports=function(e){return o((function(){return!!i[e]()||a[e]()!==a||n&&i[e].name!==e}))}},ec7b:function(e,t,r){"use strict";r("592c")}}]);